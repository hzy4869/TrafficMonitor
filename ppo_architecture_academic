// PPO Architecture for Drone Navigation
digraph PPO_Architecture {
	nodesep=0.4 rankdir=LR ranksep=0.8 splines=ortho
	node [fillcolor=white fontname="Times-Roman" fontsize=12 penwidth=1.2 shape=record style=filled]
	edge [fontname="Times-Roman" fontsize=10 penwidth=1.0]
	subgraph cluster_0 {
		color=gray40 fontcolor=gray40 label="Observation Space (Inputs)" style=dashed
		obs_ac [label="{Drone State|Dimensions: 6
(History Trajectory)}" fillcolor="#E3F2FD"]
		obs_tgt [label="{Target Info|Dimensions: 15
(Rel. Pos & Dist)}" fillcolor="#E3F2FD"]
		obs_vis [label="{Status Flags|Dimensions: 10
(Visible & Covered)}" fillcolor="#E3F2FD"]
		obs_grid [label="{Grid Map|Dimensions: 100
(Exploration Count)}" fillcolor="#E3F2FD"]
	}
	subgraph cluster_1 {
		color=gray40 fontcolor=gray40 label="Feature Extraction (CustomModel)" style=dashed
		enc_ac [label="{Linear Layer|ReLu
Output: 32}" fillcolor="#FFF9C4" style="rounded,filled"]
		enc_tgt [label="{Linear Layer|ReLu
Output: 32}" fillcolor="#FFF9C4" style="rounded,filled"]
		enc_vis [label="{Linear Layer|ReLu
Output: 32}" fillcolor="#FFF9C4" style="rounded,filled"]
		enc_grid [label="{Linear Layer|ReLu
Output: 32}" fillcolor="#FFF9C4" style="rounded,filled"]
		concat [label="{Concatenation|Total Dim: 128}" fillcolor="#FFE082" shape=box3d]
		mlp_shared [label="{Shared MLP|Layers: 256 -> 128
Latent Representation}" fillcolor="#FFF9C4" style="rounded,filled"]
	}
	subgraph cluster_2 {
		color=gray40 fontcolor=gray40 label="PPO Algorithm" style=dashed
		head_actor [label="{Actor Head (Policy)|Output: 8 Logits}" fillcolor="#F3E5F5"]
		head_critic [label="{Critic Head (Value)|Output: 1 Scalar}" fillcolor="#F3E5F5"]
	}
	out_action [label="Action
(Discrete 8 Directions)" color="#C62828" fillcolor="#FFEBEE" shape=ellipse]
	out_value [label="Value Estimate
V(s)" color="#2E7D32" fillcolor="#E8F5E9" shape=ellipse]
	obs_ac -> enc_ac
	obs_tgt -> enc_tgt [label=Flatten]
	obs_vis -> enc_vis [label=Flatten]
	obs_grid -> enc_grid
	enc_ac -> concat
	enc_tgt -> concat
	enc_vis -> concat
	enc_grid -> concat
	concat -> mlp_shared
	mlp_shared -> head_actor
	mlp_shared -> head_critic
	head_actor -> out_action [label="Softmax
Sampling"]
	head_critic -> out_value
}
